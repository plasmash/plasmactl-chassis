runtime: plugin
action:
  title: Show
  description: Show allocations and attachments
  arguments:
    - name: chassis
      title: Chassis
      description: Chassis path (optional, shows all if omitted)
  options:
    - name: dir
      shorthand: d
      title: Directory
      description: Working directory (defaults to current)
      type: string
      default: "."
    - name: platform
      shorthand: p
      title: Platform
      description: Filter nodes by platform instance
      type: string
      default: ""
    - name: kind
      shorthand: k
      title: Kind
      description: Filter to allocations or attachments only
      type: string
      enum: [allocations, attachments]
      default: ""
  result:
    type: object
    properties:
      chassis:
        type: string
        description: Filtered chassis path (if specified)
      allocations:
        type: array
        description: Node allocations
        items:
          type: object
          properties:
            node:
              type: string
              description: Node hostname
            platform:
              type: string
              description: Platform instance
            chassis:
              type: array
              description: Effective chassis paths for this node
              items:
                type: string
      attachments:
        type: array
        description: Component attachments
        items:
          type: object
          properties:
            component:
              type: string
              description: Component name
            version:
              type: string
              description: Component version
            chassis:
              type: string
              description: Chassis path
